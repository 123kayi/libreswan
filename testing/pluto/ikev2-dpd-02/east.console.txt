/testing/guestbin/swan-prep
east #
 ipsec setup start
[ 00.00] registered KLIPS /proc/sys/net
[ 00.00] ipsec_3des_init(alg_type=15 alg_id=3 name=3des): ret=0
[ 00.00] KLIPS cryptoapi interface: alg_type=15 alg_id=12 name=cbc(aes) keyminbits=128 keymaxbits=256, found(0)
[ 00.00] KLIPS cryptoapi interface: alg_type=15 alg_id=253 name=cbc(twofish) keyminbits=128 keymaxbits=256, found(0)
[ 00.00] KLIPS cryptoapi interface: alg_type=15 alg_id=252 name=cbc(serpent) keyminbits=128 keymaxbits=256, found(0)
[ 00.00] KLIPS cryptoapi interface: alg_type=15 alg_id=6 name=cbc(cast5) keyminbits=128 keymaxbits=128, found(0)
[ 00.00] KLIPS cryptoapi interface: alg_type=15 alg_id=3 name=cbc(des3_ede) keyminbits=192 keymaxbits=192, found(0)
[ 00.00] KLIPS: lookup for ciphername=cipher_null: not found 
[ 00.00] 
Redirecting to: systemctl start ipsec.service
[ 00.00] 
east #
 /testing/pluto/bin/wait-until-pluto-started
east #
 ipsec auto --add westnet-eastnet-ikev2
002 added connection description "westnet-eastnet-ikev2"
east #
 echo "initdone"
initdone
east #
 ipsec look
[ 00.00] pluto[1723]: segfault at 7f3e8ac1fef0 ip 00007f3e929f85f9 sp 00007fff9eb0b1c0 error 4 in pluto[7f3e9298d000+128000]
east NOW
ipsec0->eth1 mtu=16260(9999)->1500
ROUTING TABLES
default via 192.1.2.254 dev eth1 
169.254.0.0/16 dev eth0  scope link  metric 1002 
169.254.0.0/16 dev eth1  scope link  metric 1003 
169.254.0.0/16 dev eth2  scope link  metric 1004 
192.0.2.0/24 dev eth0  proto kernel  scope link  src 192.0.2.254 
192.1.2.0/24 dev eth1  proto kernel  scope link  src 192.1.2.23 
192.9.2.0/24 dev eth2  proto kernel  scope link  src 192.9.2.23 
NSS_CERTIFICATES
Certificate Nickname                                         Trust Attributes
                                                             SSL,S/MIME,JAR/XPI
east #
east #
 if [ -n "`ls /tmp/core* 2>/dev/null`" ]; then echo CORE FOUND; core=`ls /tmp/core* 2>/dev/null`; gdb --batch PATH/libexec/ipsec/pluto $core; mv /tmp/core* OUTPUT/; fi
CORE FOUND
[New LWP 1723]
[New LWP 1725]
[Thread debugging using libthread_db enabled]
Using host libthread_db library "/lib64/libthread_db.so.1".
Core was generated by `PATH/libexec/ipsec/pluto --config /etc/ipsec.conf --nofork --leak-detecti'.
Program terminated with signal SIGSEGV, Segmentation fault.
#0  0x00007f3e929f85f9 in unroute_connection (c=0x7f3e8ac1fb28) at /source/programs/pluto/kernel.c:813
813			cr = sr->routing;
#0  0x00007f3e929f85f9 in unroute_connection (c=0x7f3e8ac1fb28) at /source/programs/pluto/kernel.c:813
        sr = 0x7f3e8ac1fbe0
        cr = RT_ROUTED_PROSPECTIVE
#1  0x00007f3e929c65f3 in liveness_check (st=0x7f3e8aaff8c8) at /source/programs/pluto/timer.c:507
        tm = {mono_secs = 77}
        last_liveness = {mono_secs = 65}
        timeout = 10
        pst = 0x7f3e8ac2b8c8
        c = 0x7f3e8ac1fb28
        last_msg_age = {delta_secs = 77}
#2  0x00007f3e929c6ac3 in handle_next_timer_event () at /source/programs/pluto/timer.c:627
        ev = 0x7f3e8aafbfd8
        type = EVENT_v2_LIVENESS
        st = 0x7f3e8aaff8c8
#3  0x00007f3e929c634f in handle_timer_event () at /source/programs/pluto/timer.c:444
No locals.
#4  0x00007f3e929c44f3 in call_server () at /source/programs/pluto/server.c:774
        readfds = {__osfds_bits = {0 <repeats 128 times>}}
        writefds = {__osfds_bits = {0 <repeats 128 times>}}
        ndes = 0
        ifp = 0x0
#5  0x00007f3e929c0c84 in main (argc=5, argv=0x7fff9eb0ca58) at /source/programs/pluto/plutomain.c:1387
        lockfd = 11
        log_to_stderr_desired = 0
        log_to_file_desired = 0
        keep_alive = 0
        virtual_private = 0x0
mv: failed to preserve ownership for ‘OUTPUT/core.east.pluto.1723’: Operation not permitted
east #
 if [ -f /sbin/ausearch ]; then ausearch -r -m avc -ts recent ; fi

